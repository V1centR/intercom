!function(){var a=9e5,b=864e5,c="chaordic-apikey",d="chaordic-debug",e=function(){return(new Date).getTime()},f=Array.prototype,g=function(){function a(a,b){var c=f.indexOf(a.charAt(b));if(-1===c)throw"Cannot decode";return c}function b(b){var c,d,f=0,g=b.length,h=[];if(b=String(b),0===g)return b;if(g%4!==0)throw"Cannot decode";for(b.charAt(g-1)===e&&(f=1,b.charAt(g-2)===e&&(f=2),g-=4),c=0;g>c;c+=4)d=a(b,c)<<18|a(b,c+1)<<12|a(b,c+2)<<6|a(b,c+3),h.push(String.fromCharCode(d>>16,d>>8&255,255&d));switch(f){case 1:d=a(b,c)<<18|a(b,c+1)<<12|a(b,c+2)<<6,h.push(String.fromCharCode(d>>16,d>>8&255));break;case 2:d=a(b,c)<<18|a(b,c+1)<<12,h.push(String.fromCharCode(d>>16))}return h.join("")}function c(a,b){var c=a.charCodeAt(b);if(c>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c}function d(a){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";a=String(a);var b,d,g=[],h=a.length-a.length%3;if(0===a.length)return a;for(b=0;h>b;b+=3)d=c(a,b)<<16|c(a,b+1)<<8|c(a,b+2),g.push(f.charAt(d>>18)),g.push(f.charAt(d>>12&63)),g.push(f.charAt(d>>6&63)),g.push(f.charAt(63&d));switch(a.length-h){case 1:d=c(a,b)<<16,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+e+e);break;case 2:d=c(a,b)<<16|c(a,b+1)<<8,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+f.charAt(d>>6&63)+e)}return g.join("")}var e="=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{d:b,e:d}}(),h=function(){"undefined"==typeof chaordic&&(chaordic=[]),"[object Array]"===Object.prototype.toString.call(chaordic)?chaordic=function(a){return{Config:{},lib:{},push:function(){return f.push.apply(a,f.slice.call(arguments))},callbacks:function(){return f.slice.call(a)},loaderRunCount:0}}(chaordic):(chaordic.Config||(chaordic.Config={}),chaordic.lib||(chaordic.lib={}),chaordic.loaderRunCount||(chaordic.loaderRunCount=0)),chaordic.initializedAt=e()},i=function(){for(var a,b=document.getElementsByTagName("script"),c=b.length-1;c>-1;){if(a=b[c],a.getAttribute("data-apikey")&&/loader\.js/.test(a.src))return a;c-=1}throw new Error("[loader.js] Unable to find loader.js script")},j=function(a){a+="=";for(var b,c=document.cookie.split(";"),d=0,e=c.length;e>d;){for(b=c[d];" "===b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf(a))return decodeURIComponent(b.substring(a.length,b.length));d+=1}return null},k=function(a,b){var c=a+"="+encodeURIComponent(b)+"; path=/";document.cookie=c},l=function(a){var b=j(c);return b?a.setAttribute("data-apikey",b):b=a.getAttribute("data-apikey"),b},m=function(){chaordic.initialize=function(){chaordic.last_initialize_args=f.slice.call(arguments)},chaordic.setActiveFoo=function(a){k(c,a)},chaordic.setDebug=function(a){k(d,a?"true":"")}},n=function(){var a=i(),b=String(a.src).split("?")[0].replace(/^(.+\:)?\/\/(.+)/,"$2"),c=b.split("/"),d=chaordic.Config;d.API_KEY=l(a),d.MODULE=a.getAttribute("data-module"),d.PROTOCOL=location.protocol+"//",c.pop(),d.STATIC_HOST=c.shift(),d.STATIC_CONTEXT="/"+c.join("/")+"/",d.ONSITE_CONTEXT=d.STATIC_CONTEXT.replace(/(.*)\/[^\/]+\/$/,"$1/onsite/")},o=function(a){var b=document.documentElement,c=document.createElement("script");c.setAttribute("charset","UTF-8"),c.src=a,c.async=!0,b.insertBefore(c,b.firstChild)},p=function(){var a="test_"+e();try{return localStorage.setItem(a,a),localStorage.removeItem(a),localStorage}catch(b){return null}},q=function(a,b){var c,d="GET";a+="?t="+e(),"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(d,a),c.onprogress=function(){}):(c=new XMLHttpRequest,c.open(d,a,!0)),c.onload=function(){b(c.responseText)},c.onerror=function(){b(null)},c.send()},r=function(c,d){var f,g,h,i,j=p(),k=function(a){setTimeout(function(){d(a)},0)};return null!==j&&window.JSON?(f="chaordic_script_cache_"+c,g=j.getItem(f),g&&(i=JSON.parse(g),h=e()<i.ts+b),void(h?(k(i.data),i.ts+a<e()&&q(c,function(a){a&&j.setItem(f,JSON.stringify({data:a,ts:e()}))})):q(c,function(a){null!==a?(k(a),j.setItem(f,JSON.stringify({data:a,ts:e()}))):k(null)}))):k(null)},s=function(b){"true"===j(d)?o(b):r(b,function(c){null!==c?window.execScript?window.execScript(c):window.eval.call(window,c):o(b+"?t="+Math.round(e()/a))})},t=function(){var a=chaordic.Config;s(a.PROTOCOL+a.STATIC_HOST+a.STATIC_CONTEXT+a.API_KEY+"/current.js")},u=function(){var a=chaordic.Config;s(a.PROTOCOL+a.STATIC_HOST+a.STATIC_CONTEXT+a.API_KEY+"/chaordic-vtex.js")},v=function(){var a=chaordic.Config;s(a.PROTOCOL+a.STATIC_HOST+"/search/generated/"+a.API_KEY+"/loader.js")},w=function(){h(),0===chaordic.loaderRunCount&&(m(),n(),v(),chaordic.Config.MODULE===g.d("dnRleA==")?u():t()),chaordic.loaderRunCount+=1};w()}();